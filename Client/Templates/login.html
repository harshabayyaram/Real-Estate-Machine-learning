<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - Real Estate Price Prediction</title>
  <!-- Bootstrap CSS link -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <style>
    /* Add your custom CSS styles here */
    body {
      background-color: #f8f9fa;
    }
    /* Add more styles as needed */
  </style>
</head>
<body>
  <div class="container mt-5">
    <h1 class="text-center">Login</h1>

    <!-- Login Form -->
    <form id="loginForm" class="mt-4">
      <div class="form-group">
        <label for="username">Username:</label>
        <input
          type="text"
          class="form-control"
          id="email"
          name="username"
          required
        />
      </div>
      <div class="form-group">
        <label for="password">Password:</label>
        <input
          type="password"
          class="form-control"
          id="password"
          name="password"
          required
        />
      </div>
      <button type="button" class="btn btn-primary" id="loginButton" onclick="login()"> 
        Login
      </button>
    </form>

    <div id="loginMessage"></div>

    <!-- Registration Prompt -->
    <div class="text-center mt-3">
      <p>Not registered? <a href="register.html">Register here</a></p>
    </div>

    <!-- Firebase Status Message -->
    <div id="firebaseStatus" class="mt-3"></div>
  </div>

  <!-- Bootstrap JS and Popper.js scripts -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <!-- Include Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js"; // Import signInWithEmailAndPassword directly

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional

    const firebaseConfig = {
      apiKey: "AIzaSyDWzwd5zoX4GxoWxJ9Yn1ujSdOHRI1wXdY",
      authDomain: "real-estate-1fc25.firebaseapp.com",
      databaseURL: "https://real-estate-1fc25-default-rtdb.firebaseio.com",
      projectId: "real-estate-1fc25",
      storageBucket: "real-estate-1fc25.appspot.com",
      messagingSenderId: "31247126547",
      appId: "1:31247126547:web:68d627b21d0bc47d7f2fe6",
      measurementId: "G-F7QSEDZ2JV",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // Export login function
    window.login = function() {
      var username = document.getElementById("email").value;
      var password = document.getElementById("password").value;

      // Use Firebase Authentication to authenticate user
      signInWithEmailAndPassword(auth, username, password)
        .then((userCredential) => {
          // Successfully logged in
          window.location.href = "./Home.html";
        })
        .catch((error) => {
          // Handle login error
          document.getElementById("firebaseStatus").innerHTML =
            "<p class='text-danger'>Login failed. Please check your credentials.</p>";
        });
    }
  </script>
</body>
</html>
